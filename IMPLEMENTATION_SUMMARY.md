# LPM 구현 완료 요약

## ✅ 완료된 기능

### 1. 인증 시스템
- Google OAuth 2.0 로그인
- 세션 관리 (7일 유지)
- 자동 팀 생성 (초기 자금 1억)

### 2. 카드 시스템
- **66명의 LCK 선수 데이터**
- **카드팩 3종류**:
  - 베이직: 1,000만원 (파워 400 이하)
  - 프리미엄: 2,000만원 (파워 400 이상)
  - 레전드: 5,000만원 (모든 파워)
- **뽑기 확률**: 선수 70%, 작전 20%, 서포트 7%, 감독 3%
- **중복 시스템**: 중복 선수 = 경험치 1000 증가
- 슬롯머신 애니메이션 (3초)

### 3. 로스터 시스템
- 48 코스트 제한
- 포지션별 선수 배치 (TOP/JUNGLE/MID/ADC/SUPPORT)
- 포지션 검증 (TOP 선수는 TOP에만)

### 4. 경기 시뮬레이션 (3페이즈)
- **페이즈 1**: 라인전 (라인전, CS, 판단력)
- **페이즈 2**: 오브젝트 한타 (한타력, 시야)
- **페이즈 3**: 최종 한타 (모든 능력치 + 주사위 1~10)
- 컨디션/폼 자동 반영
- AI 매칭 (같은 티어 우선)
- LP 변동 및 티어 승급/강등

### 5. ADMIN 패널
- 카드 이미지 업로드 (선수/감독/작전/서포트)
- 카드 생성 (모든 타입)
- 권한 체크

### 6. UI/UX
- 반응형 디자인 (모바일/태블릿/데스크톱)
- Framer Motion 애니메이션
- 그라디언트 디자인
- 실시간 잔액 업데이트

## 📊 포지션별 파워 계산 공식

```
TOP: 멘탈 + 한타 + CS + 시야*0.5 + 판단 + 라인전*2

JUNGLE: 멘탈*2 + 한타 + CS + 시야*1.5 + 판단 - 라인전*0.5

MID: 멘탈 + 한타 + CS + 시야 + 판단 + 라인전

ADC: CS*1.25 + 라인전*1.25 + 한타*1.25 + 멘탈 + 시야 + 판단

SUPPORT: 시야*1.25 + 한타*1.25 + 멘탈 + CS + 판단 + 라인전
```

## 🗂️ 데이터베이스 스키마

- users: 사용자 정보
- teams: 팀 정보 (잔액, 티어, LP, 명성, 팬덤)
- player_cards: 선수 카드 (66명)
- coach_cards: 감독 카드
- tactic_cards: 작전 카드
- support_cards: 서포트 카드
- user_player_cards: 사용자 선수 카드 인벤토리
- rosters: 로스터 (5명)
- matches: 경기 기록

### 7. 프론트엔드 페이지
- **Roster.tsx**: 48 코스트 로스터 편성
  - 5개 포지션 카드 표시
  - 코스트 실시간 체크
  - 선수 추가/교체/제거
  - 사용 가능한 선수 모달
- **Match.tsx**: 3페이즈 경기 시뮬레이션
  - 실시간 경기 연출
  - Phase 1/2/3 애니메이션
  - 경기 결과 및 LP 변동 표시
  - 튜토리얼 모달
- **Admin.tsx**: 카드 관리 패널
  - 4가지 카드 타입 생성 (선수/감독/작전/서포트)
  - 이미지 업로드 (5MB 제한)
  - 능력치 입력 폼
  - 튜토리얼 모달
- **Posting.tsx**: 경매장 시스템
  - 경매 목록 조회 (마켓/내 경매)
  - 경매 등록 (6~48시간)
  - 입찰 시스템 (최소 입찰가 + 100만원)
  - 즉시 구매 기능
  - 튜토리얼 모달

### 8. 경매장 시스템 (Posting)
- **24시간 경매 시스템**
- 시작가/즉시구매가 설정
- 입찰 기록 및 최고가 추적
- 자동 카드 이전 및 금액 정산
- 입찰 중인 경매 취소 불가
- 경매 기간: 6/12/24/48시간 선택 가능

### 9. 업적 시스템
- **30개 업적** (카테고리별 분류)
- 카테고리: 경기, 카드, 승리, 티어, 컬렉션, 경매, 명성
- 진행도 자동 추적
- 보상: 돈 + 명성도
- 업적 달성 시 보상 수령 시스템
- 통계 대시보드 (달성률, 총 보상 등)
- **Achievements.tsx**: 카테고리별 필터, 진행도 바, 보상 수령
- **achievements.ts**: 업적 조회/수령 API

### 10. 스폰서 시스템
- **7가지 스폰서 타입** (게임 하드웨어, 에너지 드링크, 의류 등)
- 티어/명성도 조건별 스폰서 잠금
- 월별 자동 수익 지급
- 보너스 시스템 (승급, 연승, 우승 등)
- 계약 기간 선택 (1~12개월)
- 같은 타입 중복 계약 불가
- 계약 해지 기능
- **Sponsors.tsx**: 계약 관리, 현재 스폰서 표시
- **sponsors.ts**: 스폰서 계약/해지 API

### 11. 팬덤 시스템
- **팬덤 수 & 만족도 시스템**
- 10단계 팬덤 레벨 (신생 팬덤 → 세계적)
- **팬 미팅** (3가지 규모: 기본/프리미엄/스페셜)
  - 7일에 1번 개최 가능
  - 비용 지불로 팬덤 증가 & 만족도 상승
- **팬덤 이벤트**
  - 기간 한정 이벤트 참여
  - 팬덤 조건 충족 시 보상 획득
- **굿즈 샵**
  - 팀 굿즈 제작 및 판매
  - 팬덤 수에 따른 굿즈 잠금 해제
  - 굿즈 판매로 팬덤 증가
- **경기 결과 연동**
  - 승리 시 팬덤/만족도 증가
  - 연승 시 보너스 팬덤
  - 패배 시 만족도 감소
- **Fandom.tsx**: 팬 미팅, 이벤트, 굿즈 샵 UI
- **fandom.ts**: 팬덤 관리 API

### 12. 프로덕션 배포 설정
- **.env.example**: 환경 변수 예시
- **ecosystem.config.js**: PM2 클러스터 모드 설정
- **PRODUCTION_SETUP.md**: 상세 배포 가이드
  - GCP VM 설정
  - PostgreSQL 설치 및 설정
  - PM2로 서버 실행
  - Nginx 리버스 프록시 설정
  - SSL 인증서 (Let's Encrypt) 설정
  - berrple.com 도메인 연결
  - 자동 백업 및 모니터링

## 🎯 다음 구현 예정

1. 길드 시스템 (제외)
2. 기록 & 명예의 전당 (선택)
3. 실제 프로덕션 배포

## 🚀 실행 방법

```bash
# 데이터베이스 설정
psql -U root -d lpm < server/src/database/schema.sql
psql -U root -d lpm < server/src/database/initial_players.sql
psql -U root -d lpm < server/src/database/update_power_formula.sql

# 서버 실행
cd server
npm install
npm run dev

# 클라이언트 실행
cd client
npm install
npm run dev
```

## 📦 Git 커밋 기록

1. Initial commit: 프로젝트 구조 + DB 스키마
2. feat: 메인 화면 및 네비게이션 바
3. feat: 카드 뽑기 시스템
4. feat: 로스터, 경기, ADMIN 패널

## 🔗 GitHub

https://github.com/suni211/lpm
